var e,n=require("react"),t=(e=require("resize-observer-polyfill"))&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var i="undefined"!=typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect;module.exports=function(e){var o=void 0===e?{}:e,c=o.maxFontSize,u=void 0===c?100:c,f=o.minFontSize,a=void 0===f?20:f,l=o.onFinish,s=o.onStart,S=o.resolution,z=void 0===S?5:S,d=n.useCallback(function(){return{calcKey:0,fontSize:u,fontSizePrev:a,fontSizeMax:u,fontSizeMin:a}},[u,a]),v=n.useRef(null),y=n.useRef(),m=n.useRef(!1),w=n.useState(d),M=w[0],h=w[1],p=M.calcKey,b=M.fontSize,x=M.fontSizeMax,K=M.fontSizeMin,E=M.fontSizePrev,F=null,P=n.useState(function(){return new t(function(){F=window.requestAnimationFrame(function(){m.current||(s&&s(),m.current=!0,h(r({},d(),{calcKey:p+1})))})})})[0];n.useEffect(function(){return v.current&&P.observe(v.current),function(){F&&window.cancelAnimationFrame(F),P.disconnect()}},[F,P]);var g=v.current&&v.current.innerHTML;return n.useEffect(function(){0===p||m.current||(g!==y.current&&(s&&s(),h(r({},d(),{calcKey:p+1}))),y.current=g)},[p,d,g,s]),i(function(){if(0!==p){var e=Math.abs(b-E)<=z,n=!!v.current&&(v.current.scrollHeight>v.current.offsetHeight||v.current.scrollWidth>v.current.offsetWidth),t=b>E;if(e)n?h({fontSize:E<b?E:b-(E-b),fontSizeMax:x,fontSizeMin:K,fontSizePrev:E,calcKey:p}):(m.current=!1,l&&l(b));else{var r,i=x,o=K;n?(r=t?E-b:K-b,i=Math.min(x,b)):(r=t?x-b:E-b,o=Math.max(K,b)),h({calcKey:p,fontSize:b+r/2,fontSizeMax:i,fontSizeMin:o,fontSizePrev:b})}}},[p,b,x,K,E,l,v,z]),{fontSize:b+"%",ref:v}};
//# sourceMappingURL=index.js.map
