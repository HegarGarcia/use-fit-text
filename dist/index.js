var e,n=require("react"),t=(e=require("resize-observer-polyfill"))&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var i="undefined"!=typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect;module.exports=function(e){var o=void 0===e?{}:e,c=o.maxFontSize,u=void 0===c?100:c,f=o.minFontSize,a=void 0===f?20:f,l=o.onFinish,s=o.onStart,S=o.resolution,z=void 0===S?5:S,d=n.useCallback(function(){return{calcKey:0,fontSize:u,fontSizePrev:a,fontSizeMax:u,fontSizeMin:a}},[u,a]),v=n.useRef(null),m=n.useRef(),w=n.useRef(!1),y=n.useState(d),h=y[0],M=y[1],p=h.calcKey,x=h.fontSize,F=h.fontSizeMax,b=h.fontSizeMin,K=h.fontSizePrev,E=null,P=n.useState(function(){return new t(function(){E=window.requestAnimationFrame(function(){w.current||(s&&s(),w.current=!0,M(r({},d(),{calcKey:p+1})))})})})[0];n.useEffect(function(){return v.current&&P.observe(v.current),function(){E&&window.cancelAnimationFrame(E),P.disconnect()}},[E,P]);var g=v.current&&v.current.innerHTML;return n.useEffect(function(){0===p||w.current||(g!==m.current&&(s&&s(),M(r({},d(),{calcKey:p+1}))),m.current=g)},[p,d,g,s]),i(function(){if(0!==p){var e=Math.abs(x-K)<=z,n=!!v.current&&(v.current.scrollHeight>v.current.offsetHeight||v.current.scrollWidth>v.current.offsetWidth),t=x>K;if(e)n&&x===K?(w.current=!1,console.error("Failed to fit text with `minFontSize = "+a+"`. To fix, reduce `minFontSize`.")):n?M({fontSize:K<x?K:x-(K-x),fontSizeMax:F,fontSizeMin:b,fontSizePrev:K,calcKey:p}):(w.current=!1,l&&l(x));else{var r,i=F,o=b;n?(r=t?K-x:b-x,i=Math.min(F,x)):(r=t?F-x:K-x,o=Math.max(b,x)),M({calcKey:p,fontSize:x+r/2,fontSizeMax:i,fontSizeMin:o,fontSizePrev:x})}}},[p,x,F,b,K,l,v,z]),{fontSize:x+"%",ref:v}};
//# sourceMappingURL=index.js.map
