var e=require("react");function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var t={debug:10,info:20,warn:30,error:40,none:100},r="undefined"!=typeof window&&window.document&&window.document.createElement?e.useLayoutEffect:e.useEffect;module.exports=function(i){var o=void 0===i?{}:i,c=o.logLevel,f=o.maxFontSize,u=void 0===f?100:f,a=o.minFontSize,s=void 0===a?20:a,l=o.onFinish,S=o.onStart,d=o.resolution,v=void 0===d?5:d,z=t[void 0===c?"info":c],w=e.useCallback(function(){return{calcKey:0,fontSize:u,fontSizePrev:s,fontSizeMax:u,fontSizeMin:s}},[u,s]),h=e.useRef(null),m=e.useRef(),M=e.useRef(!1),y=e.useState(w),b=y[0],x=y[1],g=b.calcKey,p=b.fontSize,F=b.fontSizeMax,K=b.fontSizeMin,E=b.fontSizePrev,O=null,P=e.useState(function(){return new ResizeObserver(function(){O=window.requestAnimationFrame(function(){M.current||(S&&S(),M.current=!0,x(n({},w(),{calcKey:g+1})))})})})[0];e.useEffect(function(){return h.current&&P.observe(h.current),function(){O&&window.cancelAnimationFrame(O),P.disconnect()}},[O,P]);var R=h.current&&h.current.innerHTML;return e.useEffect(function(){0===g||M.current||(R!==m.current&&(S&&S(),x(n({},w(),{calcKey:g+1}))),m.current=R)},[g,w,R,S]),r(function(){if(0!==g){var e=Math.abs(p-E)<=v,n=!!h.current&&(h.current.scrollHeight>h.current.offsetHeight||h.current.scrollWidth>h.current.offsetWidth),r=p>E;if(e)n&&p===E?(M.current=!1,z<=t.info&&console.info("[use-fit-text] reached `minFontSize = "+s+"` without fitting text")):n?x({fontSize:r?E:K,fontSizeMax:F,fontSizeMin:K,fontSizePrev:E,calcKey:g}):(M.current=!1,l&&l(p));else{var i,o=F,c=K;n?(i=r?E-p:K-p,o=Math.min(F,p)):(i=r?F-p:E-p,c=Math.max(K,p)),x({calcKey:g,fontSize:p+i/2,fontSizeMax:o,fontSizeMin:c,fontSizePrev:p})}}},[g,p,F,K,E,l,h,v]),{fontSize:p+"%",ref:h}};
//# sourceMappingURL=index.js.map
