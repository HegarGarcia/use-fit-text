import{useCallback as e,useRef as n,useState as t,useEffect as o,useLayoutEffect as i}from"react";import r from"resize-observer-polyfill";const f="undefined"!=typeof window&&window.document&&window.document.createElement?i:o;export default({maxFontSize:i=100,minFontSize:c=20,onFinish:z,onStart:S,resolution:a=5}={})=>{const u=e(()=>(S&&S(),{fontSize:i,fontSizePrev:c,fontSizeMax:i,fontSizeMin:c}),[i,c,S]),l=n(null),s=n(!0),[m,d]=t(u),{fontSize:w,fontSizeMax:M,fontSizeMin:h,fontSizePrev:v}=m;let x=null;const[p]=t(()=>new r(()=>{x=window.requestAnimationFrame(()=>{s.current||d(u()),s.current=!1})}));return o(()=>(l.current&&p.observe(l.current),()=>{x&&window.cancelAnimationFrame(x),p.disconnect()}),[x,p]),f(()=>{const e=Math.abs(w-v)<=a,n=!!l.current&&(l.current.scrollHeight>l.current.offsetHeight||l.current.scrollWidth>l.current.offsetWidth),t=w>v;if(e)return void(n?d({fontSize:v<w?v:w-(v-w),fontSizeMax:M,fontSizeMin:h,fontSizePrev:v}):z&&z(w));let o,i=M,r=h;n?(o=t?v-w:h-w,i=Math.min(M,w)):(o=t?M-w:v-w,r=Math.max(h,w)),d({fontSize:w+o/2,fontSizeMax:i,fontSizeMin:r,fontSizePrev:w})},[w,M,h,v,z,l,a]),{fontSize:w+"%",ref:l}};
//# sourceMappingURL=index.modern.js.map
