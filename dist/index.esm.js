import{useCallback as n,useRef as e,useState as t,useEffect as r,useLayoutEffect as i}from"react";function o(){return(o=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var c={debug:10,info:20,warn:30,error:40,none:100},f="undefined"!=typeof window&&window.document&&window.document.createElement?i:r;export default function(i){var u=void 0===i?{}:i,a=u.logLevel,l=u.maxFontSize,d=void 0===l?100:l,s=u.minFontSize,z=void 0===s?20:s,S=u.onFinish,v=u.onStart,m=u.resolution,w=void 0===m?5:m,h=c[void 0===a?"info":a],M=n(function(){return{calcKey:0,fontSize:d,fontSizePrev:z,fontSizeMax:d,fontSizeMin:z}},[d,z]),y=e(null),x=e(),b=e(!1),g=t(M),p=g[0],F=g[1],K=p.calcKey,O=p.fontSize,P=p.fontSizeMax,j=p.fontSizeMin,H=p.fontSizePrev,A=null,L=t(function(){return new ResizeObserver(function(){A=window.requestAnimationFrame(function(){b.current||(v&&v(),b.current=!0,F(o({},M(),{calcKey:K+1})))})})})[0];r(function(){return y.current&&L.observe(y.current),function(){A&&window.cancelAnimationFrame(A),L.disconnect()}},[A,L]);var W=y.current&&y.current.innerHTML;return r(function(){0===K||b.current||(W!==x.current&&(v&&v(),F(o({},M(),{calcKey:K+1}))),x.current=W)},[K,M,W,v]),f(function(){if(0!==K){var n=Math.abs(O-H)<=w,e=!!y.current&&(y.current.scrollHeight>y.current.offsetHeight||y.current.scrollWidth>y.current.offsetWidth),t=O>H;if(n)e&&O===H?(b.current=!1,h<=c.info&&console.info("[use-fit-text] reached `minFontSize = "+z+"` without fitting text")):e?F({fontSize:t?H:j,fontSizeMax:P,fontSizeMin:j,fontSizePrev:H,calcKey:K}):(b.current=!1,S&&S(O));else{var r,i=P,o=j;e?(r=t?H-O:j-O,i=Math.min(P,O)):(r=t?P-O:H-O,o=Math.max(j,O)),F({calcKey:K,fontSize:O+r/2,fontSizeMax:i,fontSizeMin:o,fontSizePrev:O})}}},[K,O,P,j,H,S,y,w]),{fontSize:O+"%",ref:y}}
//# sourceMappingURL=index.esm.js.map
